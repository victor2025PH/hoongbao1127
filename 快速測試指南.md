# 快速測試指南

## ✅ 服務狀態

- **後端服務**: ✅ 運行中 - http://localhost:8080
- **前端服務**: ✅ 運行中 - http://localhost:3001

## 🚀 立即測試

### 1. 打開前端頁面
訪問：**http://localhost:3001**

### 2. 測試消息面板
1. 點擊右上角的**星星圖標** ⭐
2. 應該看到消息面板彈出
3. 如果沒有消息，會顯示"暫無消息"

### 3. 測試 WebSocket 連接
打開瀏覽器開發者工具（F12），在 Console 中查看：
- 應該看到 `[WebSocket] Connected` 或類似的連接成功消息
- 如果看到錯誤，檢查後端日誌

### 4. 測試 API（可選）
在瀏覽器控制台執行：

```javascript
// 測試獲取未讀消息數量
fetch('http://localhost:8080/api/v1/messages/unread-count', {
  headers: {
    'X-Telegram-Init-Data': 'user=' + encodeURIComponent(JSON.stringify({id: 6359371231}))
  }
})
.then(r => r.json())
.then(data => console.log('未讀消息:', data))
.catch(err => console.error('錯誤:', err))
```

### 5. 測試發送消息（需要後端支持）
可以通過後端 API 發送測試消息，然後在前端查看。

## 📝 測試檢查清單

- [ ] 前端頁面可以正常打開
- [ ] 星星圖標可以點擊
- [ ] 消息面板可以打開
- [ ] WebSocket 連接成功（查看控制台）
- [ ] 未讀數量徽章顯示（如果有未讀消息）
- [ ] 消息列表可以正常顯示

## 🔍 調試技巧

### 查看後端日誌
後端服務的日誌會顯示在啟動它的終端窗口中，包括：
- WebSocket 連接/斷開記錄
- API 請求記錄
- 錯誤信息

### 查看前端日誌
打開瀏覽器開發者工具（F12）：
- **Console**: 查看 JavaScript 錯誤和日誌
- **Network**: 查看 API 請求和 WebSocket 連接狀態
- **Application**: 查看 LocalStorage

### 常見問題

**問題：WebSocket 連接失敗**
- 檢查後端是否正常運行
- 檢查瀏覽器控制台的錯誤信息
- 確認 initData 是否正確傳遞

**問題：消息不顯示**
- 檢查數據庫中是否有消息記錄
- 檢查 API 請求是否成功（Network 標籤）
- 確認用戶 ID 是否正確

**問題：後端無法啟動**
- 檢查 Python 環境
- 檢查依賴是否安裝：`pip install -r requirements.txt`
- 檢查 `.env` 文件配置

## 🎯 下一步

測試完成後，可以：
1. 測試紅包領取通知功能
2. 測試餘額變動通知功能
3. 測試雙提示功能（miniapp 和 Telegram）
4. 部署到服務器

