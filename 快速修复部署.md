# ğŸ”§ å¿«é€Ÿä¿®å¤éƒ¨ç½²

## é—®é¢˜
éƒ¨ç½²æ—¶å‡ºç° `ModuleNotFoundError: No module named 'sqlalchemy'`

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ³•1ï¼šä½¿ç”¨ä¿®å¤è„šæœ¬ï¼ˆæ¨èï¼‰

SSHåˆ°æœåŠ¡å™¨åæ‰§è¡Œï¼š

```bash
cd /opt/luckyred
git pull origin master
chmod +x scripts/sh/fix-and-deploy.sh
bash scripts/sh/fix-and-deploy.sh
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨ä¿®å¤

```bash
# 1. è¿›å…¥APIç›®å½•
cd /opt/luckyred/api

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœå­˜åœ¨ï¼‰
source .venv/bin/activate

# å¦‚æœæ²¡æœ‰è™šæ‹Ÿç¯å¢ƒï¼Œåˆ›å»ºå®ƒ
if [ ! -d ".venv" ]; then
    python3 -m venv .venv
    source .venv/bin/activate
    pip install -r requirements.txt
fi

# 3. è¿è¡Œè¿ç§»
cd /opt/luckyred
python3 migrations/add_task_redpacket_system.py

# 4. é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactivate

# 5. æ„å»ºå‰ç«¯
cd /opt/luckyred/frontend
npm install
npm run build

# 6. é‡å¯æœåŠ¡
sudo systemctl restart luckyred-api
sudo systemctl restart luckyred-bot

# 7. è¿è¡Œæµ‹è¯•
cd /opt/luckyred/api
source .venv/bin/activate
cd /opt/luckyred
python3 scripts/py/test_tasks_api.py
deactivate
```

## éªŒè¯

éƒ¨ç½²å®Œæˆåï¼Œæ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
sudo systemctl status luckyred-api
sudo systemctl status luckyred-bot

# æ£€æŸ¥å‰ç«¯æ–‡ä»¶
ls -la /opt/luckyred/frontend/dist/

# è®¿é—®ä»»åŠ¡é¡µé¢
curl -I https://mini.usdt2026.cc/tasks
```

