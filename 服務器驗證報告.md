# æœå‹™å™¨é©—è­‰å ±å‘Š

## ğŸ“Š é©—è­‰æ™‚é–“
$(Get-Date -Format "yyyy-MM-dd HH:mm:ss")

---

## âœ… é©—è­‰æ­¥é©Ÿ

### é©—è­‰ 1: æª¢æŸ¥æœå‹™å™¨æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "cd /opt/luckyred && ls -la api/routers/chats.py"
```

**æª¢æŸ¥é …ç›®**:
- âœ… `api/routers/chats.py` æ˜¯å¦å­˜åœ¨
- âœ… `api/main.py` æ˜¯å¦å­˜åœ¨
- âœ… ç•¶å‰ä»£ç¢¼æäº¤ç‰ˆæœ¬

**é æœŸçµæœ**: 
- æ–‡ä»¶æ‡‰è©²å­˜åœ¨
- æ–‡ä»¶å¤§å°æ‡‰è©²å¤§æ–¼ 0
- æäº¤ç‰ˆæœ¬æ‡‰è©²æ˜¯æœ€æ–°çš„

---

### é©—è­‰ 2: æª¢æŸ¥æœå‹™ç‹€æ…‹

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "sudo systemctl status luckyred-api"
```

**æª¢æŸ¥é …ç›®**:
- âœ… æœå‹™æ˜¯å¦è™•æ–¼ `active (running)` ç‹€æ…‹
- âœ… æœå‹™æ—¥èªŒä¸­æ˜¯å¦æœ‰éŒ¯èª¤

**é æœŸçµæœ**: 
- æœå‹™æ‡‰è©²è™•æ–¼é‹è¡Œç‹€æ…‹
- ä¸æ‡‰è©²æœ‰éŒ¯èª¤ä¿¡æ¯

---

### é©—è­‰ 3: åŸ·è¡Œæœå‹™å™¨æ›´æ–°

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "cd /opt/luckyred && git fetch origin && git reset --hard origin/master && sudo systemctl restart luckyred-api"
```

**åŸ·è¡Œå…§å®¹**:
- âœ… æ›´æ–°æœå‹™å™¨ä»£ç¢¼
- âœ… é©—è­‰é—œéµæ–‡ä»¶
- âœ… é‡å•Ÿ API æœå‹™
- âœ… æª¢æŸ¥æœå‹™ç‹€æ…‹

**é æœŸçµæœ**: 
- ä»£ç¢¼æ‡‰è©²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
- æ–‡ä»¶æ‡‰è©²å­˜åœ¨
- æœå‹™æ‡‰è©²æ­£å¸¸é‡å•Ÿ

---

### é©—è­‰ 4: æœ€çµ‚ç‹€æ…‹æª¢æŸ¥

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "cd /opt/luckyred && git log --oneline -1 && ls -lh api/routers/chats.py && sudo systemctl is-active luckyred-api && sudo journalctl -u luckyred-api -n 20 --no-pager | grep -i 'error\|failed\|exception'"
```

**æª¢æŸ¥é …ç›®**:
- âœ… ç•¶å‰æäº¤ç‰ˆæœ¬
- âœ… é—œéµæ–‡ä»¶ç‹€æ…‹
- âœ… æœå‹™é‹è¡Œç‹€æ…‹
- âœ… éŒ¯èª¤æ—¥èªŒæª¢æŸ¥

**é æœŸçµæœ**: 
- æ‰€æœ‰é …ç›®éƒ½æ‡‰è©²æ­£å¸¸
- ä¸æ‡‰è©²æœ‰éŒ¯èª¤ä¿¡æ¯

---

## ğŸ“‹ é©—è­‰çµæœ

### æ–‡ä»¶ç‹€æ…‹
- **api/routers/chats.py**: å¾…é©—è­‰
- **api/main.py**: å¾…é©—è­‰

### æœå‹™ç‹€æ…‹
- **API æœå‹™**: å¾…é©—è­‰
- **æœå‹™æ—¥èªŒ**: å¾…é©—è­‰

### ä»£ç¢¼ç‰ˆæœ¬
- **ç•¶å‰æäº¤**: å¾…é©—è­‰
- **æ˜¯å¦æœ€æ–°**: å¾…é©—è­‰

---

## ğŸ”§ å¦‚æœé©—è­‰å¤±æ•—

### å•é¡Œ 1: æ–‡ä»¶ä¸å­˜åœ¨

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
ssh ubuntu@165.154.254.99 "cd /opt/luckyred && git fetch origin && git reset --hard origin/master && ls -la api/routers/chats.py"
```

---

### å•é¡Œ 2: æœå‹™æœªé‹è¡Œ

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
ssh ubuntu@165.154.254.99 "sudo systemctl restart luckyred-api && sudo systemctl status luckyred-api"
```

---

### å•é¡Œ 3: æœå‹™å•Ÿå‹•å¤±æ•—

**æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒ**:
```bash
ssh ubuntu@165.154.254.99 "sudo journalctl -u luckyred-api -n 50"
```

**å¸¸è¦‹éŒ¯èª¤**:
- `ModuleNotFoundError: No module named 'api.routers.chats'` - æ–‡ä»¶ä¸å­˜åœ¨
- `ImportError` - å°å…¥éŒ¯èª¤
- `SyntaxError` - èªæ³•éŒ¯èª¤

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### å¦‚æœé©—è­‰æˆåŠŸ

1. âœ… æ¸¬è©¦æœç´¢åŠŸèƒ½
2. âœ… é©—è­‰ç¾¤çµ„æœç´¢æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. âœ… ç¢ºèªæœå‹™é‹è¡Œæ­£å¸¸

### å¦‚æœé©—è­‰å¤±æ•—

1. æŸ¥çœ‹è©³ç´°éŒ¯èª¤ä¿¡æ¯
2. æ ¹æ“šéŒ¯èª¤ä¿¡æ¯ä¿®å¾©å•é¡Œ
3. é‡æ–°åŸ·è¡Œé©—è­‰

---

**é©—è­‰å ±å‘Šç”Ÿæˆæ™‚é–“**: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")

