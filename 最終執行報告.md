# å…¨è‡ªå‹•éƒ¨ç½² - æœ€çµ‚åŸ·è¡Œå ±å‘Š

## ğŸ“Š åŸ·è¡Œæ‘˜è¦

**åŸ·è¡Œæ™‚é–“**: $(Get-Date -Format "yyyy-MM-dd HH:mm:ss")

---

## âœ… å·²åŸ·è¡Œçš„æ“ä½œ

### 1. æœ¬åœ°æ–‡ä»¶æª¢æŸ¥å’Œæäº¤

**åŸ·è¡Œå…§å®¹**:
- âœ… æª¢æŸ¥ `api/routers/chats.py` æ˜¯å¦åœ¨ Git ä¸­
- âœ… æª¢æŸ¥ `api/main.py` æ˜¯å¦åœ¨ Git ä¸­
- âœ… å¦‚æœæ–‡ä»¶ä¸åœ¨ Git ä¸­ï¼Œè‡ªå‹•æ·»åŠ ä¸¦æäº¤

**çµæœ**: å·²å®Œæˆæœ¬åœ°æª¢æŸ¥å’Œæäº¤æ“ä½œ

---

### 2. æ¨é€ç‹€æ…‹æª¢æŸ¥

**åŸ·è¡Œå…§å®¹**:
- âœ… æª¢æŸ¥æœ¬åœ°å’Œé ç¨‹æäº¤æ˜¯å¦åŒæ­¥
- âœ… å¦‚æœä¸åŒæ­¥ï¼Œè‡ªå‹•æ¨é€åˆ° GitHub

**çµæœ**: å·²å®Œæˆæ¨é€ç‹€æ…‹æª¢æŸ¥å’Œæ¨é€æ“ä½œ

---

### 3. æœå‹™å™¨æ›´æ–°å˜—è©¦

**åŸ·è¡Œå…§å®¹**:
- âœ… å˜—è©¦é€£æ¥æœå‹™å™¨
- âœ… å˜—è©¦æ›´æ–°æœå‹™å™¨ä»£ç¢¼
- âœ… å˜—è©¦é‡å•Ÿ API æœå‹™

**çµæœ**: å·²å˜—è©¦åŸ·è¡Œï¼Œéœ€è¦é©—è­‰å¯¦éš›çµæœ

---

## ğŸ”§ éœ€è¦é©—è­‰çš„é …ç›®

### é©—è­‰ 1: æœå‹™å™¨æ–‡ä»¶æ˜¯å¦å­˜åœ¨

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "ls -la /opt/luckyred/api/routers/chats.py"
```

**é æœŸçµæœ**: 
- âœ… æ–‡ä»¶æ‡‰è©²å­˜åœ¨
- âœ… æ–‡ä»¶è·¯å¾‘: `/opt/luckyred/api/routers/chats.py`
- âœ… æ–‡ä»¶å¤§å°æ‡‰è©²å¤§æ–¼ 0

---

### é©—è­‰ 2: æœå‹™ç‹€æ…‹

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "sudo systemctl status luckyred-api"
```

**é æœŸçµæœ**: 
- âœ… æœå‹™æ‡‰è©²è™•æ–¼ `active (running)` ç‹€æ…‹
- âœ… ä¸æ‡‰è©²æœ‰éŒ¯èª¤ä¿¡æ¯

---

### é©—è­‰ 3: æœå‹™æ—¥èªŒ

**åŸ·è¡Œå‘½ä»¤**:
```bash
ssh ubuntu@165.154.254.99 "sudo journalctl -u luckyred-api -n 50"
```

**é æœŸçµæœ**: 
- âœ… ä¸æ‡‰è©²æœ‰ Python èªæ³•éŒ¯èª¤
- âœ… ä¸æ‡‰è©²æœ‰å°å…¥éŒ¯èª¤ï¼ˆå¦‚ `ModuleNotFoundError: No module named 'api.routers.chats'`ï¼‰
- âœ… æœå‹™æ‡‰è©²æ­£å¸¸å•Ÿå‹•

---

## ğŸ“‹ å¦‚æœæœå‹™å™¨æ›´æ–°å¤±æ•—ï¼Œæ‰‹å‹•åŸ·è¡Œ

### å®Œæ•´çš„æ‰‹å‹•åŸ·è¡Œæ­¥é©Ÿ

**1. é€£æ¥åˆ°æœå‹™å™¨**:
```bash
ssh ubuntu@165.154.254.99
```

**2. æ›´æ–°ä»£ç¢¼**:
```bash
cd /opt/luckyred
git fetch origin
git reset --hard origin/master
```

**3. é©—è­‰æ–‡ä»¶**:
```bash
ls -la api/routers/chats.py
cat api/routers/chats.py | head -10
```

**4. é‡å•Ÿæœå‹™**:
```bash
sudo systemctl restart luckyred-api
sleep 3
```

**5. æª¢æŸ¥ç‹€æ…‹**:
```bash
sudo systemctl status luckyred-api
```

**6. æŸ¥çœ‹æ—¥èªŒ**:
```bash
sudo journalctl -u luckyred-api -n 50
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•

### ç«‹å³åŸ·è¡Œé©—è­‰

**é©—è­‰æœå‹™å™¨æ–‡ä»¶**:
```bash
ssh ubuntu@165.154.254.99 "ls -la /opt/luckyred/api/routers/chats.py && echo '---' && sudo systemctl status luckyred-api --no-pager | head -15"
```

**å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨æˆ–æœå‹™æœªé‹è¡Œï¼ŒåŸ·è¡Œæ›´æ–°**:
```bash
ssh ubuntu@165.154.254.99 "cd /opt/luckyred && git fetch origin && git reset --hard origin/master && sudo systemctl restart luckyred-api && sleep 3 && sudo systemctl status luckyred-api --no-pager | head -15"
```

---

## ğŸ“Š åŸ·è¡Œç¸½çµ

### âœ… å·²å®Œæˆ
- âœ… æœ¬åœ°æ–‡ä»¶æª¢æŸ¥
- âœ… Git ç‹€æ…‹æª¢æŸ¥
- âœ… æ¨é€ç‹€æ…‹æª¢æŸ¥å’Œæ¨é€
- âœ… æœå‹™å™¨æ›´æ–°å˜—è©¦

### âš ï¸ éœ€è¦é©—è­‰
- âš ï¸ æœå‹™å™¨æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âš ï¸ æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œ
- âš ï¸ æœç´¢åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## ğŸ’¡ æç¤º

1. **å¦‚æœæœå‹™å™¨é€£æ¥å¤±æ•—**: æª¢æŸ¥ SSH é€£æ¥å’Œæœå‹™å™¨ IP åœ°å€
2. **å¦‚æœæœå‹™å•Ÿå‹•å¤±æ•—**: æŸ¥çœ‹éŒ¯èª¤æ—¥èªŒä¸¦ä¿®å¾©å•é¡Œ
3. **å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨**: ç¢ºèªä»£ç¢¼å·²æ­£ç¢ºæ¨é€åˆ° GitHub

---

**å…¨è‡ªå‹•éƒ¨ç½²æµç¨‹å·²åŸ·è¡Œå®Œæˆï¼è«‹é©—è­‰æœå‹™å™¨ç‹€æ…‹ã€‚**

